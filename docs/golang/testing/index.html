<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.109.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Testing | Goldydocs</title><meta name=description content="Working with Testing in Go.
"><meta property="og:title" content="Testing"><meta property="og:description" content="Working with Testing in Go.
"><meta property="og:type" content="article"><meta property="og:url" content="/docs/golang/testing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-07-28T00:38:53-04:00"><meta property="og:site_name" content="Goldydocs"><meta itemprop=name content="Testing"><meta itemprop=description content="Working with Testing in Go.
"><meta itemprop=dateModified content="2023-07-28T00:38:53-04:00"><meta itemprop=wordCount content="4698"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Testing"><meta name=twitter:description content="Working with Testing in Go.
"><link rel=preload href=/scss/main.min.d6cc2ae862fa5c937a2dbb3d86c775f5e0f56868c19e280b817554aeceea0342.css as=style><link href=/scss/main.min.d6cc2ae862fa5c937a2dbb3d86c775f5e0f56868c19e280b817554aeceea0342.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-00000000-0")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Goldydocs</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/no/>Norsk</a>
<a class=dropdown-item href=/fa/>فارسی</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/no/>Norsk</a>
<a class=dropdown-item href=/fa/>فارسی</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsbash-li><a href=/docs/bash/ title="Bash scripting" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsbash><span>Bash</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsbashblueprints-li><a href=/docs/bash/blueprints/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbashblueprints><span>Blueprints</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsbashcommands-li><a href=/docs/bash/commands/ title="Common commands" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbashcommands><span>Commands</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsbashbasics-li><a href=/docs/bash/basics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbashbasics><span>Basics</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsbashsnippets-li><a href=/docs/bash/snippets/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbashsnippets><span>Snippets</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docscss-li><a href=/docs/css/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscss><span>CSS Styling</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssrepodump-li><a href=/docs/css/repodump/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssrepodump><span>Repo dump</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssbox-model-li><a href=/docs/css/box-model/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssbox-model><span>Box model</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssflex-li><a href=/docs/css/flex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssflex><span>Flexbox</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssgrid-li><a href=/docs/css/grid/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssgrid><span>Grid</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscsspositioning-li><a href=/docs/css/positioning/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscsspositioning><span>Positioning</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssselectors-li><a href=/docs/css/selectors/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssselectors><span>Selectors</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssrelative-units-li><a href=/docs/css/relative-units/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssrelative-units><span>Relative Units</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssnav-example-li><a href=/docs/css/nav-example/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssnav-example><span>Navigation example</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docscssexample-li><a href=/docs/css/example/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docscssexample><span>Sample styling sheet</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsddd-li><a href=/docs/ddd/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsddd><span>Domain-driven design</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdddentities-li><a href=/docs/ddd/entities/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdddentities><span>Entities</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdddvalue-objects-li><a href=/docs/ddd/value-objects/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdddvalue-objects><span>Value objects</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdddaggregates-li><a href=/docs/ddd/aggregates/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdddaggregates><span>Aggregates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsdddservices-li><a href=/docs/ddd/services/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdddservices><span>Services</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgit-li><a href=/docs/git/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgit><span>git</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgithub-li><a href=/docs/github/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgithub><span>GitHub</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgithubgh-actions-li><a href=/docs/github/gh-actions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgithubgh-actions><span>GitHub actions</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsgolang-li><a href=/docs/golang/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgolang><span>Golang</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgolangoverhead-li><a href=/docs/golang/overhead/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgolangoverhead><span>Project organization</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangoverheadproject-setup-li><a href=/docs/golang/overhead/project-setup/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangoverheadproject-setup><span>Project setup</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangoverheadtooling-li><a href=/docs/golang/overhead/tooling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangoverheadtooling><span>Go tooling</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangoverheadidioms-li><a href=/docs/golang/overhead/idioms/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangoverheadidioms><span>Idioms</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangoverheadblueprints-li><a href=/docs/golang/overhead/blueprints/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangoverheadblueprints><span>Blueprints</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgolangbasics-li><a href=/docs/golang/basics/ title="Getting started with Go" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgolangbasics><span>Getting started</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangbasicserrors-li><a href=/docs/golang/basics/errors/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangbasicserrors><span>Errors</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangbasicstypes-li><a href=/docs/golang/basics/types/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangbasicstypes><span>Types and collections</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgolangio-li><a href=/docs/golang/io/ title="Input and output" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgolangio><span>I/O</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangiojson-li><a href=/docs/golang/io/json/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangiojson><span>JSON data</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangiorw-files-li><a href=/docs/golang/io/rw-files/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangiorw-files><span>Reading, writing, files</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgolangnetwork-li><a href=/docs/golang/network/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgolangnetwork><span>Network</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangnetworkclients-li><a href=/docs/golang/network/clients/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangnetworkclients><span>Clients</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangnetworkservers-li><a href=/docs/golang/network/servers/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangnetworkservers><span>Servers</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsgolangdatabases-li><a href=/docs/golang/databases/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsgolangdatabases><span>Databases</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangdatabasespatterns-li><a href=/docs/golang/databases/patterns/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabasespatterns><span>Patterns</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangdatabasessql-package-li><a href=/docs/golang/databases/sql-package/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabasessql-package><span>SQL package</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangdatabasesmysql-li><a href=/docs/golang/databases/mysql/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabasesmysql><span>MySQL</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangdatabasespostgres-li><a href=/docs/golang/databases/postgres/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabasespostgres><span>PostgreSQL</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangdatabasessqlite-li><a href=/docs/golang/databases/sqlite/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabasessqlite><span>SQLite</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsgolangdatabasesmigrations-li><a href=/docs/golang/databases/migrations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabasesmigrations><span>Migrations</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsgolangtesting-li><a href=/docs/golang/testing/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsgolangtesting><span class=td-sidebar-nav-active-item>Testing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangconcurrency-li><a href=/docs/golang/concurrency/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangconcurrency><span>Concurrency</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangcli-tools-li><a href=/docs/golang/cli-tools/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangcli-tools><span>CLI tools</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangobservability-li><a href=/docs/golang/observability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangobservability><span>Observability</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangdatabases-li><a href=/docs/golang/databases/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangdatabases><span>Databases</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangcontainers-li><a href=/docs/golang/containers/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangcontainers><span>Containers</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangcontext-li><a href=/docs/golang/context/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangcontext><span>Context</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangtemplates-li><a href=/docs/golang/templates/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangtemplates><span>Templates</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolanglogging-li><a href=/docs/golang/logging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolanglogging><span>Logging</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangsecurity-li><a href=/docs/golang/security/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangsecurity><span>Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangapis-li><a href=/docs/golang/apis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangapis><span>APIs</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsgolangrepo-dump-li><a href=/docs/golang/repo-dump/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsgolangrepo-dump><span>Repo dump</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsinkscape-li><a href=/docs/inkscape/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsinkscape><span>Inkscape</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsinkscapebasics-li><a href=/docs/inkscape/basics/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsinkscapebasics><span>Basics</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsinkscapemenus-li><a href=/docs/inkscape/menus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsinkscapemenus><span>Menus</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsinkscaperepo-dump-li><a href=/docs/inkscape/repo-dump/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsinkscaperepo-dump><span>Repo dump</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsjavascript-li><a href=/docs/javascript/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsjavascript><span>Javascript</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptinstall-li><a href=/docs/javascript/install/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptinstall><span>Installation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascripttypes-globals-li><a href=/docs/javascript/types-globals/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascripttypes-globals><span>Types and globals</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptarrays-li><a href=/docs/javascript/arrays/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptarrays><span>Arrays</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptobjects-classes-li><a href=/docs/javascript/objects-classes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptobjects-classes><span>Objects and Classes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptloops-logic-li><a href=/docs/javascript/loops-logic/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptloops-logic><span>Loops and logic</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptfunctions-li><a href=/docs/javascript/functions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptfunctions><span>Functions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptdom-li><a href=/docs/javascript/dom/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptdom><span>Document Object Model (DOM)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptevents-li><a href=/docs/javascript/events/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptevents><span>Events</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptintermediate-li><a href=/docs/javascript/intermediate/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptintermediate><span>Intermediate JS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docsjavascriptconcurrency-li><a href=/docs/javascript/concurrency/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsjavascriptconcurrency><span>Concurrency</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docslinux-li><a href=/docs/linux/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docslinux><span>Linux</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docslinuxcommand-reference-li><a href=/docs/linux/command-reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docslinuxcommand-reference><span>Linux commands</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docslinuxtmux-li><a href=/docs/linux/tmux/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docslinuxtmux><span>tmux</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspython-li><a href=/docs/python/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docspython><span>Python</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docssql-li><a href=/docs/sql/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docssql><span>SQL</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docssqlmysql-li><a href=/docs/sql/mysql/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docssqlmysql><span>MySQL</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docssqlpostgres-li><a href=/docs/sql/postgres/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docssqlpostgres><span>Postgres</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-docssqlsql-li><a href=/docs/sql/sql/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docssqlsql><span>Repo dump</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#package-naming>Package naming</a></li><li><a href=#methods>Methods</a></li><li><a href=#write-a-test>Write a test</a><ul><li><a href=#arrange>Arrange</a></li><li><a href=#act>Act</a></li><li><a href=#assert>Assert</a></li></ul></li><li><a href=#test-flags>Test flags</a><ul><li><a href=#shuffle>shuffle</a></li><li><a href=#failfast>failfast</a></li><li><a href=#run>run</a></li><li><a href=#short>short</a></li></ul></li><li><a href=#unit-tests>Unit tests</a><ul><li><a href=#table-driven-tests>Table-driven tests</a></li><li><a href=#subtests>Subtests</a></li><li><a href=#parallel-testing>Parallel testing</a></li><li><a href=#skipping-tests>Skipping tests</a></li><li><a href=#cleanup>Cleanup</a></li><li><a href=#helpers>Helpers</a></li><li><a href=#temporary-directories>Temporary directories</a></li></ul></li><li><a href=#integration-tests>Integration tests</a></li><li><a href=#testing-the-main-method>Testing the main method</a></li><li><a href=#testable-examples>Testable examples</a><ul><li><a href=#naming-conventions>Naming conventions</a></li><li><a href=#godoc-server>godoc server</a></li></ul></li><li><a href=#test-unexported-functions>Test unexported functions</a></li><li><a href=#coverage-tests>Coverage tests</a></li><li><a href=#benchmark-tests>Benchmark tests</a><ul><li><a href=#sub-benchmarks>Sub-benchmarks</a></li><li><a href=#comparing-benchmarks>Comparing benchmarks</a></li></ul></li><li><a href=#fuzz-tests>Fuzz tests</a></li><li><a href=#build-tags>Build tags</a></li><li><a href=#mocks-stubs-fakes-dependencies>Mocks, stubs, fakes (dependencies)</a></li><li><a href=#test-data>Test data</a></li><li><a href=#strategies>Strategies</a></li><li><a href=#integration-testing>Integration testing</a><ul><li><a href=#test-db-setup-and-teardown>Test db setup and teardown</a></li></ul></li><li><a href=#http>HTTP</a><ul><li><a href=#handlers>Handlers</a></li><li><a href=#middleware>Middleware</a></li></ul></li><li><a href=#end-to-end-tests>End-to-end tests</a><ul><li><a href=#testing-utilities>Testing utilities</a></li></ul></li><li><a href=#testing-html>Testing HTML</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/golang/>Golang</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/golang/testing/ aria-disabled=true class="btn-link disabled">Testing</a></li></ol></nav><div class=td-content><h1>Testing</h1><div class=lead>Working with Testing in Go.</div><header class=article-meta></header><p>Place both internal and external tests in the same folder as the code they test.</p><ul><li><em>Internal tests</em> verify code from the same package. They are called &lsquo;white-box tests&rsquo; and can test exported and unexported identifiers.</li><li><em>External tests</em> verify code from another package. They are called &lsquo;black-box tests&rsquo;. External tests use the <code>_test</code> suffix in the package name. For example, <code>package url_test</code>.</li></ul><h2 id=package-naming>Package naming</h2><p>Place <code>*_test.go</code> files in the same directory as the code that you are testing. For external (integration) tests, use the original package name followed by <code>_test</code>. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>original_test</span>
</span></span></code></pre></div><p>This package format requires that you import the source into the test file.</p><h2 id=methods>Methods</h2><p>The most useful are <code>t.Errorf()</code> and <code>t.Fatalf()</code>. The following table describes all available <code>t.*</code> test methods:</p><table><thead><tr><th>Method</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td><code>t.Log()</code></td><td style=text-align:left>Log a message.</td></tr><tr><td><code>t.Logf()</code></td><td style=text-align:left>Log a formatted message.</td></tr><tr><td><code>t.Fail()</code></td><td style=text-align:left>Mark the test as failed, but continue test execution.</td></tr><tr><td><code>t.FailNow()</code></td><td style=text-align:left>Mark the test as failed, and immediately stop execution.</td></tr><tr><td><code>t.Error()</code></td><td style=text-align:left>Combination of <code>Log()</code> and <code>Fail()</code>.</td></tr><tr><td><code>t.Errorf()</code></td><td style=text-align:left>Combination of <code>Logf()</code> and <code>Fail()</code>.</td></tr><tr><td><code>t.Fatal()</code></td><td style=text-align:left>Combination of <code>Log()</code> and <code>FailNow()</code>.</td></tr><tr><td><code>t.Fatalf()</code></td><td style=text-align:left>Combination of <code>Logf()</code> and <code>FailNow()</code>.</td></tr></tbody></table><h2 id=write-a-test>Write a test</h2><p>Each test function must use the <code>TestXxx(t *testing.T)</code> signature, or the Go compiler does not recognize and run the test. For example, the following test verifies the functionality of a simple <code>Add(a, b int) int</code> function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestAdd</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Each test contain three main sections:</p><dl><dt>Arrange</dt><dd>Set up the test inputs and expected values.</dd><dt>Act</dt><dd>Execute the portion of code that you are testing.</dd><dt>Assert</dt><dd>Verify that the code returned the correct values. You can use the <code>got</code>/<code>want</code> or <code>got</code>/<code>expected</code> formatting.</dd></dl><h3 id=arrange>Arrange</h3><p>A common way to arrange a test is to use table tests. Table tests are a way to provide multiple test cases that you loop over and test during the <code>Act</code> stage. To set up a table test, complete the following:</p><ol><li>Create a <code>testCase</code> struct that models the inputs and expected outputs of the test:<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>testCase</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>a</span>        <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>b</span>        <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>expected</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></li><li>Use a map literal with a <code>string</code> key and <code>testCase</code> value. The <code>string</code> key is the name of the test, and <code>testCase</code> is the test values:<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>tt</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#000>testCase</span><span style=color:#000;font-weight:700>{</span>   <span style=color:#8f5902;font-style:italic>// tt for table tests
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>     <span style=color:#4e9a06>&#34;test one&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#000>expected</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>     <span style=color:#4e9a06>&#34;test two&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#000>expected</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>     <span style=color:#4e9a06>&#34;test three&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>         <span style=color:#000>a</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#000>b</span><span style=color:#000;font-weight:700>:</span>        <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#000>expected</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></li></ol><h3 id=act>Act</h3><p>Within the same <code>TestAdd()</code> function, write a <code>for range</code> loop. This is where you execute each test case with the code that you are testing. Use the <code>t.Run()</code> subtest method in the <code>for range</code> loop to run each individual test case with a name. <code>t.Run()</code> accepts two parameters: the name of the test, and an unnamed test function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>tt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#8f5902;font-style:italic>// act
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>got</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>b</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In the previous example, <code>name</code> is the key in the <code>tt</code> map, and <code>tc</code> is the <code>testCase</code> struct in the <code>tt</code> map.</p><h3 id=assert>Assert</h3><p>In the assert step, you compare the actual values (what you got in the Act step) with the expected value, which is usually a field in the <code>testCase</code> struct. Asserts are generally <code>if</code> statements that return a formatted error with <code>t.Errorf</code> when the <code>got</code> and <code>expected</code> values do not match:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>tt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>		<span style=color:#8f5902;font-style:italic>// assert
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>got</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>expected</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;expected %d, got %d&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>expected</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>got</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=assert-helper>Assert helper</h4><p>Writing assert logic can get tedious, so you should extract it into a helper function. Add the following code to <code>/internal/assert/assert.go</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>assert</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;testing&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Equal</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>T</span> <span style=color:#000>comparable</span><span style=color:#000;font-weight:700>](</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>got</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>expected</span> <span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Helper</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>got</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#000>expected</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;got: %v; want: %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>got</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>expected</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The preceding example uses <a href=https://go.dev/doc/tutorial/generics>generics</a>.</p><p>Now, you can use this helper function to verify test output during the assert stage:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>tt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>		<span style=color:#8f5902;font-style:italic>// assert
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>got</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>expected</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=test-flags>Test flags</h2><h3 id=shuffle>shuffle</h3><p>Add the <code>-shuffle=on</code> flag to execute tests in a random order:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -v -shuffle<span style=color:#ce5c00;font-weight:700>=</span>on
</span></span></code></pre></div><h3 id=failfast>failfast</h3><p>Stops tests in a single package if there is a failing test. This is helpful if you want to work on the first failing test:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a40000>$</span> <span style=color:#204a87;font-weight:700>go</span> <span style=color:#000>test</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>v</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>failfast</span>
</span></span></code></pre></div><h3 id=run>run</h3><p>Provide the name of a specific test that you want to run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// run TestName
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>$</span> <span style=color:#204a87;font-weight:700>go</span> <span style=color:#000>test</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>v</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>run</span><span style=color:#000;font-weight:700>=</span><span style=color:#000>TestName</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// run a specific subtest
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>$</span> <span style=color:#204a87;font-weight:700>go</span> <span style=color:#000>test</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>v</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>run</span><span style=color:#000;font-weight:700>=</span><span style=color:#000>TestName</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000;font-weight:700>^</span><span style=color:#000>with_port</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// run a specific subtest
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>$</span> <span style=color:#204a87;font-weight:700>go</span> <span style=color:#000>test</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>v</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>run</span><span style=color:#000;font-weight:700>=</span><span style=color:#000>TestName</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>with_port</span>
</span></span></code></pre></div><h3 id=short>short</h3><p>Use the short flag to skip long-running tests, like integration tests. To designate a test as a short test, add the following snippet at the beginning of the test function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestFunction</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Skip the test if the &#34;-short&#34; flag is provided when running the test.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Short</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Skip</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;models: skipping integration test&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>When you run tests, include the <code>-short</code> flag to skip any tests that include the <code>testing.Short()</code> function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -v -short ./...
</span></span></code></pre></div><h2 id=unit-tests>Unit tests</h2><p>In Go, a <em>unit</em> is a package, and a <em>unit test</em> verifies the behavior of a single package. Unit tests test simple pieces of code, such as functions or methods.</p><h3 id=table-driven-tests>Table-driven tests</h3><p>Also called data-driven and parameterized tests. They verify code with varying inputs. You can also implement subtests that run tests in isolation.</p><p>Imagine table-driven tests as actual tables, where the headers are struct fields, and the rows become individual slices in the test cases:</p><table><thead><tr><th style=text-align:left>product</th><th>rating</th><th>price</th></tr></thead><tbody><tr><td style=text-align:left>prod one</td><td>5</td><td>20</td></tr><tr><td style=text-align:left>prod two</td><td>10</td><td>30</td></tr><tr><td style=text-align:left>prod three</td><td>15</td><td>40</td></tr></tbody></table><p>You can represent this in a test as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestTable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>product</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>product</span> <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span>        <span style=color:#000>rating</span>  <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>        <span style=color:#000>price</span>   <span style=color:#204a87;font-weight:700>float64</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>testCases</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>product</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;prod one&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>20</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;prod two&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;prod three&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>40</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Alternatively, you can use a map with an anonymous struct:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>tt</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>rating</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>price</span>  <span style=color:#204a87;font-weight:700>float64</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;prod one&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>20</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;prod two&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;prod three&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>40</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>...</span>
</span></span></code></pre></div><p>Reuse assertion logic and naming makes each test identifiable.
<code>t.Run()</code> defines a subtest. It accepts the name of the test, and then a testing function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>testCases</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>){</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=subtests>Subtests</h3><p>Use <code>t.Run()</code> to run subtests. Subtests run in isolation, so you can use <code>t.Fatal[f]()</code> and not stop test execution. In addition, you can run subtests <a href=#parallel-testing>in parallel</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>tt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>		<span style=color:#8f5902;font-style:italic>// assert
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>got</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>expected</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;expected %d, got %d&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>expected</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>got</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=parallel-testing>Parallel testing</h3><p>Tests that have <code>t.Parallel()</code> on the first line of the <code>t.Run()</code> function.</p><p>Go pauses all tests with <code>t.Parallel()</code> and then runs them when other tests complete. <code>GOMAXPROCS</code> determines how many tests run in parallel. By default, <code>GOMAXPROCS</code> is set to the number of CPUs on the machine. You can override this with the <code>-parallel</code> flag:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -parallel<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>4</span> ./...
</span></span></code></pre></div><p>Tests marked with <code>t.Parallel()</code> are run in parallel with <em>and only with</em> other parallel tests.</p><h3 id=skipping-tests>Skipping tests</h3><p>Use <code>t.Skip()</code> to skip tests during execution. Use this with <code>testing.Short()</code> and the <code>-test.short</code> argument to tell the testing package to skip specific tests.</p><p>This helps separate unit tests from integration tests. Integration tests take longer than unit tests, so you can designate a test as a unit test as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestIntegrationTest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Short</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Skip</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Skip integration tests&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// continue test ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>To skip this test, use <code>-test.short</code> when you execute the tests:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -v -test.short
</span></span></code></pre></div><h3 id=cleanup>Cleanup</h3><p>Use <code>t.Cleanup()</code> to clean up testing resources. The <code>Cleanup()</code> method is available to helper and testing methods, so it cancels after they are complete. The standard <code>defer</code> function operator executes a function before it completes, even if it is a helper function.</p><p>The following is a simple example of a function that uses <code>Cleanup</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestWithResources</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// testing...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Cleanup</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// cleanup logic
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// continue test ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=helpers>Helpers</h3><p>A test helper can improve readability of your tests. Unfortunately, when a test fails within the test helper, the testing package logs helper function line number after failure&ndash;this makes it difficult to pinpoint where the test failed.</p><p>Use the <code>t.Helper()</code> function to designate a function as a helper function. the testing pacakge ignores the helper function line number and instead logs the line number of the failing test:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>helper</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Helper</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// helper logic 
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestWithHelper</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// testing...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>helper</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// continue test ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Helper functions accept an instance of the testing.T type, so make sure you pass the <code>t</code> testing instance to the helper in the <code>TestXxx</code> function. This provides the helper with access to the testing instance as the rest of the test function.</p><h3 id=temporary-directories>Temporary directories</h3><p>The testing type provides the <code>TempDir()</code> function to create a temporary directory that is deleted automatically when testing completes. This means that you do not have to write cleanup logic:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestTempDir</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>tmpDir</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TempDir</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// testing logic 
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=integration-tests>Integration tests</h2><p>Integration tests test how the program behaves when interacted with from the outside world&ndash;how a user uses it. This means that you test the <code>main()</code> method.</p><p>In Go, you test the main method with the <code>TestMain()</code> function so you can set up and tear down resources more easily. For example, you might need to create a temporary file or build and execute a binary. You do not want to keep these artifacts in the program after testing.</p><p>Follow these general guidelines when running integration tests:</p><ol><li>Check the machine with <code>runtime.GOOS</code></li><li>Create the build command with <code>exec.Command()</code>, then use <code>.Run()</code> to execute that command. Check for errors</li><li>Run the tests with <code>m.Run()</code></li><li>Clean up any artifacts with <code>os.Remove(artifactname)</code></li></ol><h2 id=testing-the-main-method>Testing the main method</h2><p>The <code>main</code> method uses globals, which you cannot easily test. The trick is to put the logic into the <code>run()</code> function. You can inject the globals to the <code>run</code> function, and you can mimic those values during tests.</p><p>The flag package uses <code>NewFlagSet</code> function to create the default flag set, <code>CommandLine</code>.</p><h2 id=testable-examples>Testable examples</h2><p><a href=https://go.dev/blog/examples>Blog post</a></p><p>A <em>testable example</em> is live documentation for code. You write a testable example to demonstrate the package API to other developers. The API includes the exported identifiers, such as functions, methods, etc. A testable example never goes out of date.</p><p>The testing package runs testable examples and checks their results, but it does not report successes or failures:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>ExampleURL_fields</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>u</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>url</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;https://foo.com/go&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>u</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Scheme</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>u</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Host</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>u</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Path</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>u</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// https
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// foo.com
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// go
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// https://foo.com/go
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=naming-conventions>Naming conventions</h3><p>Testable examples use the following naming conventions:</p><table><thead><tr><th style=text-align:left>Signature</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>func Example()</code></td><td style=text-align:left>Example for the entire package.</td></tr><tr><td style=text-align:left><code>func ExampleParse()</code></td><td style=text-align:left>Example for the <code>Parse</code> function.</td></tr><tr><td style=text-align:left><code>func ExampleURL()</code></td><td style=text-align:left>Example for the <code>URL</code> type.</td></tr><tr><td style=text-align:left><code>func ExampleURL_Hostname()</code></td><td style=text-align:left>Example for the <code>Hostname</code> method on the <code>URL</code> type.</td></tr></tbody></table><h3 id=godoc-server>godoc server</h3><p>You can generate docs that include your <a href=#testable-examples>testable examples</a> with <code>godoc</code>. The following command installs the latest version:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go install golang.org/x/tools/cmd/godoc@latest
</span></span></code></pre></div><p>To view any <code>ExampleXxx</code> functions as Go documentation, run the <code>go doc</code> server with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ godoc -play -http <span style=color:#4e9a06>&#34;:6060&#34;</span>
</span></span></code></pre></div><p>To show additional examples of the same type, use the <code>_xxx()</code> suffix on the function name. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>ExampleURL</span><span style=color:#000;font-weight:700>(){</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>ExampleURL_fields</span><span style=color:#000;font-weight:700>(){</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=test-unexported-functions>Test unexported functions</h2><p>If you want to test an unexported function from an external test, you must export the function from the external test package. For example, the <code>parseScheme</code> function is unexported:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// url.go
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>url</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>parseScheme</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Create a new file in the same package that assigns the unexported function to an exported function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// export_test.go
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>url</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>ParseScheme</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>parseScheme</span>
</span></span></code></pre></div><p>Finally, test the function in an external test file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// parse_scheme_test.go
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>url_test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestParseScheme</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=coverage-tests>Coverage tests</h2><p>Go can generate a test report that details what code is sufficiently tested. In its simplest form, you can display the percentage of tested code with the <code>cover</code> flag:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go <span style=color:#204a87>test</span> -cover
</span></span></code></pre></div><p>View how much of your code is covered by tests:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -coverprofile cover.out
</span></span><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -coverprofile<span style=color:#ce5c00;font-weight:700>=</span>coverage_output_filename
</span></span></code></pre></div><p>The coverage output file is optional. By convention, the coverage profile file is named <code>cover.out</code>.</p><p>Use a coverage output file to view test coverage by function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go tool cover -func<span style=color:#ce5c00;font-weight:700>=</span>cover.out
</span></span></code></pre></div><p>After you create the <code>coverprofile</code> file, use the <code>cover</code> go tool to generate HTML output to view what code is and is not covered. This command opens the coverage output in the browser:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go tool cover -html<span style=color:#ce5c00;font-weight:700>=</span>cover.out
</span></span></code></pre></div><p>To create the HTML file, but not open it in the browser automatically:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go tool cover -html<span style=color:#ce5c00;font-weight:700>=</span>cover.out -o coverage.html
</span></span></code></pre></div><p>By default, the testing package only tests packages with <code>*_test.go</code> files. To test all packages, use the <code>coverpkg</code> flag:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> ./... -coverpkg<span style=color:#ce5c00;font-weight:700>=</span>./...
</span></span></code></pre></div><p>The cover tool uses three colors to identify code coverage:</p><ul><li>grey: not tracked by the coverage tool</li><li>green: sufficiently tested</li><li>red: not covered by tests</li></ul><p>To view test coverage by function, use the following commands:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -coverprofile<span style=color:#ce5c00;font-weight:700>=</span>/tmp/profile.out ./...
</span></span><span style=display:flex><span>$ go tool cover -func<span style=color:#ce5c00;font-weight:700>=</span>/tmp/profile.out
</span></span></code></pre></div><blockquote><p>All test must pass or the preceding command fails.</p></blockquote><h2 id=benchmark-tests>Benchmark tests</h2><p>Benchmark your methods to determine their efficiency. Benchmark functions use the <code>BenchmarkXxx(b *testing.B)</code> signature. Place them in the <code>x_test.go</code> file with the other test functions.</p><p>To write a benchmark function, call the method that you want to benchmark within a <code>for</code> loop in the <code>BenchmarkXxx</code> function. The <code>for</code> loop uses <code>b.N</code> as its upper bound. <code>b.N</code> adjusts the test runner to properly measure performance at runtime. In addition, you can run the <code>b.ReportAllocs()</code> function to see how many memory allocations your code makes.</p><p>For example, the following function benchmarks the <code>String()</code> method on the <code>URL</code> type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>BenchmarkURLString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>B</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReportAllocs</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Logf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Loop %d times\n&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>N</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>u</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>URL</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>Scheme</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;https&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Host</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;foo.com&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Path</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;go&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#000;font-weight:700>&lt;</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>N</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>++</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>u</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>To run the test, use the <code>-bench</code> flag. Use a dot (<code>.</code>) to run every benchmark in the package:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -bench .
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>BenchmarkURLString-12    	 8868142	       153.8 ns/op	      <span style=color:#0000cf;font-weight:700>64</span> B/op	       <span style=color:#0000cf;font-weight:700>4</span> allocs/op
</span></span><span style=display:flex><span>--- BENCH: BenchmarkURLString-12
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>PASS
</span></span><span style=display:flex><span>ok  	url/url	1.506s
</span></span></code></pre></div><p>The <code>B/op</code> column indicates that there were 64 bytes allocated in each operation. The <code>allocs/op</code> value indicates the number of memory allocations that made by the code in the benchmark.</p><p>When you run benchmarks with the <code>-bench</code> flag, the regular tests run as well (use the <code>-v</code> flag to verify). If you want to run only the benchmark tests, use the <code>-run</code> flag with the <code>^$</code> regular expression:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -run<span style=color:#ce5c00;font-weight:700>=</span>^$ -bench .
</span></span></code></pre></div><p>The <code>^$</code> regex tells the runner to ignore tests other than the benchmarks.</p><h3 id=sub-benchmarks>Sub-benchmarks</h3><p>You can run sub-benchmarks, just as you can run subtests:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>BenchmarkURLString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>B</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>benchmarks</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>URL</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#000>Scheme</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;https&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#000>Scheme</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;https&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Host</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;foo.com&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#000>Scheme</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;https&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Host</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;foo.com&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Path</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;go&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>u</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>benchmarks</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>u</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>B</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#000;font-weight:700>&lt;</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>N</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>++</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>u</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>String</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=comparing-benchmarks>Comparing benchmarks</h3><ol><li><p>Save the current benchmark result of the method:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go <span style=color:#204a87>test</span> -bench . -count <span style=color:#0000cf;font-weight:700>10</span> &gt; old.txt
</span></span></code></pre></div><p>The <code>-count</code> flag runs the benchmark the number of times that you pass to it. There is no recommendation for the number you pass to <code>count</code>&ndash;<code>10</code> is a random number.</p></li><li><p>Refactor your code.</p></li><li><p>Run the benchmarks again and compare with <code>benchstat</code>.
First, install <code>benchstat</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go install golang.org/x/perf/cmd/benchstat@latest
</span></span></code></pre></div><p>Next, compare the <code>old.txt</code> and <code>new.txt</code> files:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ benchstat old.txt new.txt 
</span></span><span style=display:flex><span>goos: linux
</span></span><span style=display:flex><span>goarch: amd64
</span></span><span style=display:flex><span>pkg: url/url
</span></span><span style=display:flex><span>cpu: Intel<span style=color:#ce5c00;font-weight:700>(</span>R<span style=color:#ce5c00;font-weight:700>)</span> Core<span style=color:#ce5c00;font-weight:700>(</span>TM<span style=color:#ce5c00;font-weight:700>)</span> i7-9750H CPU @ 2.60GHz
</span></span><span style=display:flex><span>             │   old.txt    │               new.txt                │
</span></span><span style=display:flex><span>             │    sec/op    │    sec/op     vs base                │
</span></span><span style=display:flex><span>URLString-12   138.85n ± 5%   99.70n ± 14%  -28.19% <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#ce5c00;font-weight:700>=</span>0.000 <span style=color:#000>n</span><span style=color:#ce5c00;font-weight:700>=</span>10<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>             │  old.txt   │              new.txt               │
</span></span><span style=display:flex><span>             │    B/op    │    B/op     vs base                │
</span></span><span style=display:flex><span>URLString-12   64.00 ± 0%   56.00 ± 0%  -12.50% <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#ce5c00;font-weight:700>=</span>0.000 <span style=color:#000>n</span><span style=color:#ce5c00;font-weight:700>=</span>10<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>             │  old.txt   │              new.txt               │
</span></span><span style=display:flex><span>             │ allocs/op  │ allocs/op   vs base                │
</span></span><span style=display:flex><span>URLString-12   4.000 ± 0%   3.000 ± 0%  -25.00% <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#ce5c00;font-weight:700>=</span>0.000 <span style=color:#000>n</span><span style=color:#ce5c00;font-weight:700>=</span>10<span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div></li></ol><h2 id=fuzz-tests>Fuzz tests</h2><p>Fuzz tests use random input to detect bugs and edge cases. Fuzz tests require the following:</p><ul><li>Test name must start with <code>FuzzXxx</code></li><li>Accepts the <code>*testing.F</code> parameter</li><li>Each function must define the initial value (seed corpus) with <code>f.Add()</code></li><li>There must be a Fuzz target</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>FuzzHelloWorld</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>f</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>F</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>f</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>f</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fuzz</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>a</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>HelloWorld</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=build-tags>Build tags</h2><p>How do build tags work? <a href=https://www.digitalocean.com/community/tutorials/customizing-go-binaries-with-build-tags>Digital Ocean</a></p><p>Add build tags at the top of test files so you can specify whether or not you want to run them in your test commands. For example, the following build tag designates the file for go tests that use the <code>cli</code> tag:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//go:build cli
</span></span></span></code></pre></div><p>To run tests in this file, run the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ go <span style=color:#204a87>test</span> -tags<span style=color:#ce5c00;font-weight:700>=</span>cli
</span></span></code></pre></div><p>For additional details, see <a href=https://pkg.go.dev/cmd/go#hdr-Build_constraints>Build constraints</a>.</p><h2 id=mocks-stubs-fakes-dependencies>Mocks, stubs, fakes (dependencies)</h2><p>Mocks, stubs, and fakes are simple implemenatations of code that you need to test. The different terms are interchangeable&ndash;the important part is that the test dependency <em>exposes the same interface as the production object</em>.</p><p>These test dependencies should be in their own package. For example, <code>internal/models/mocks/file.go</code>. A mock is a hard-coded values that you can use in your test cases:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>UserModel</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>email</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>password</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>email</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>case</span> <span style=color:#4e9a06>&#34;dupe@example.com&#34;</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>models</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ErrDuplicateEmail</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>default</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>UserModel</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Authenticate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>email</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>password</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>email</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;alice@example.com&#34;</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>password</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;pa$$word&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>models</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ErrInvalidCredentials</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>UserModel</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Exists</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>id</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>case</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>default</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=test-data>Test data</h2><p>Store any testing files in the <code>testdata</code> directory. Go tooling ignores this directory when building and compiling the program.</p><h2 id=strategies>Strategies</h2><p>When testing file writes, use <em>goldenfiles</em>: files that contain the expected results and that you load during tests to validate output.</p><p><code>iotest.TimeoutReader(r)</code> simulates a reading failure and returns a timeout error.</p><h2 id=integration-testing>Integration testing</h2><p>If you are testing external commands that modify the state of an external resource, the testing conditions change after each test. That is why you should use mocks.</p><h3 id=test-db-setup-and-teardown>Test db setup and teardown</h3><p>First, you have to create a new test database. Login as the root user:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mysql...
</span></span></code></pre></div><p>Create the database and user, then grant the user privileges:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>DATABASE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>test_database</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87>CHARACTER</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>SET</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>utf8mb4</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>COLLATE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>utf8mb4_unicode_ci</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;test_web&#39;</span><span style=color:#ce5c00;font-weight:700>@</span><span style=color:#4e9a06>&#39;localhost&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>INDEX</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>INSERT</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>UPDATE</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>DELETE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>test_database</span><span style=color:#000;font-weight:700>.</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;test_web&#39;</span><span style=color:#ce5c00;font-weight:700>@</span><span style=color:#4e9a06>&#39;localhost&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;test_web&#39;</span><span style=color:#ce5c00;font-weight:700>@</span><span style=color:#4e9a06>&#39;localhost&#39;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>IDENTIFIED</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;pass&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Next, create a <em>setup script</em> (setup.sql) and a <em>teardown script</em> (teardown.sql). Create each file in the <code>internal/models/testdata/</code> directory.</p><blockquote><p>Go tooling ignores the <code>testdata</code> directory.</p></blockquote><p>Next, create a <code>testutils_test.go</code> file in <code>/internal/models/</code>. This file includes code that performs the following:</p><ul><li>Creates a new database connection pool for the test db</li><li>Executes the <code>setup.sql</code> script</li><li>Executes the <code>teardown.sql</code> script from within a cleanup function</li><li>Closes the connection pool</li></ul><h2 id=http>HTTP</h2><p>The primary tool for testing handlers and middleware is the <a href=https://pkg.go.dev/net/http/httptest#ResponseRecorder>ResponseRecorder</a>. ResponseRecorder behaves the same as a ResponseWriter, but it does not write responses to a connection, it records them. To use a ResponseRecorder, perform the following:</p><ol><li>Create the ResponseRecorder object.</li><li>Pass the object to the handler.</li><li>Examine the object after the handler returns. Use the <a href=https://pkg.go.dev/net/http/httptest#ResponseRecorder.Result><code>Result()</code></a> function.</li></ol><h3 id=handlers>Handlers</h3><p>To illustrate a handler test, the following function writes &lsquo;OK&rsquo; as the response on an HTTP connection:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>ping</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>w</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ResponseWriter</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87>byte</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The following code uses the <a href=#assert-helper>assert helper</a> to test a the <code>ping</code> function:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestPing</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Initialize a new httptest.ResponseRecorder.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>rr</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>httptest</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRecorder</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Initialize a new dummy http.Request.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MethodGet</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Call the ping handler function, passing in the
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// httptest.ResponseRecorder and http.Request.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>ping</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Call the Result() method on the http.ResponseRecorder to get the
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// http.Response generated by the ping handler.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>rs</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>rr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Result</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the status code written by the ping handler was 200.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusCode</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// And we can check that the response body written by the ping handler
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// equals &#34;OK&#34;.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>body</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadAll</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TrimSpace</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>),</span> <span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=middleware>Middleware</h3><p>Middleware tests use the same general format as handler tests, but you have to create a mock HTTP handler that you can pass as the <code>next</code> value to the middleware (the <code>next</code> value is a parameter that represents the subsequent function in the middleware chain&ndash;every middleware calls the <code>ServeHTTP</code> method on the <code>next</code> argument).</p><p>For example, one middleware sets security headers on the response:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>secureHeaders</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>next</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Handler</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Handler</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>w</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ResponseWriter</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Content-Security-Policy&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;default-src &#39;self&#39;; style-src &#39;self&#39; fonts.googleapis.com; font-src fonts.gstatic.com&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Referrer-Policy&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;origin-when-cross-origin&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;X-Content-Type-Options&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;nosniff&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;X-Frame-Options&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;deny&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>		<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;X-XSS-Protection&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;0&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#000>next</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServeHTTP</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>w</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The following function tests the middleware:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestSecureHeaders</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Initialize a new httptest.ResponseRecorder and dummy http.Request.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>rr</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>httptest</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRecorder</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>r</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MethodGet</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Create a mock HTTP handler that we can pass to our secureHeaders
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// middleware, which writes a 200 status code and an &#34;OK&#34; response body.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>next</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerFunc</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>w</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ResponseWriter</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>([]</span><span style=color:#204a87>byte</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Pass the mock HTTP handler to our secureHeaders middleware. Because
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// secureHeaders *returns* a http.Handler we can call its ServeHTTP()
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// method, passing in the http.ResponseRecorder and dummy http.Request to
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// execute it.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>secureHeaders</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>next</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ServeHTTP</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Call the Result() method on the http.ResponseRecorder to get the results
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// of the test.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>rs</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>rr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Result</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the middleware has correctly set the Content-Security-Policy
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// header on the response.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>expectedValue</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;default-src &#39;self&#39;; style-src &#39;self&#39; fonts.googleapis.com; font-src fonts.gstatic.com&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Content-Security-Policy&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>expectedValue</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the middleware has correctly set the Referrer-Policy
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// header on the response.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>expectedValue</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;origin-when-cross-origin&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Referrer-Policy&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>expectedValue</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the middleware has correctly set the X-Content-Type-Options
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// header on the response.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>expectedValue</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;nosniff&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;X-Content-Type-Options&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>expectedValue</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the middleware has correctly set the X-Frame-Options header
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// on the response.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>expectedValue</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;deny&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;X-Frame-Options&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>expectedValue</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the middleware has correctly set the X-XSS-Protection header
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// on the response
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>expectedValue</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;0&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;X-XSS-Protection&#34;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>expectedValue</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Check that the middleware has correctly called the next handler in line
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// and the response status code and body are as expected.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusCode</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>body</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadAll</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TrimSpace</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>),</span> <span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=end-to-end-tests>End-to-end tests</h2><p>End-to-end (E2E) tests verify how your routing, middleware, and handlers work together as a single unit, rather than in isolation.</p><p>E2E test require the <code>httptest.New[TLS]Server</code> and test client to mimic a production environment. The following example demonstrates the following:</p><ul><li>Minimal application</li><li><code>httptest.NewTLSServer</code>.</li><li><code>ts.Client</code>, which is a method on the httptest package&rsquo;s <code>Server</code> type.</li><li>Assert the status code and response body are correct</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestPingE2E</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Create a new instance of our application struct. For now, this just
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// contains a couple of mock loggers (which discard anything written to
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// them). The loggers are required by a few of our middlewares.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>app</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>application</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>errorLog</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Discard</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>		<span style=color:#000>infoLog</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Discard</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// We then use the httptest.NewTLSServer() function to create a new test
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// server, passing in the value returned by our app.routes() method as the
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// handler for the server. This starts up a HTTPS server which listens on a
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// randomly-chosen port of your local machine for the duration of the test.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// Notice that we defer a call to ts.Close() so that the server is shutdown
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// when the test finishes.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>ts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>httptest</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewTLSServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>routes</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// The network address that the test server is listening on is contained in
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// the ts.URL field. We can  use this along with the ts.Client().Get() method
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// to make a GET /ping request against the test server. This returns a
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// http.Response struct containing the response.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>rs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>URL</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;/ping&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// We can then check the value of the response status code and body using
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// the same pattern as before.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusCode</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>body</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadAll</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TrimSpace</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>),</span> <span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The following E2E test checks whether a handler returns the correct response. First, the mock:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>mockSnippet</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>models</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Snippet</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>ID</span><span style=color:#000;font-weight:700>:</span>      <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>	<span style=color:#000>Title</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#4e9a06>&#34;An old silent pond&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>	<span style=color:#000>Content</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;An old silent pond...&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>	<span style=color:#000>Created</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Now</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>	<span style=color:#000>Expires</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Now</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Next, the handler test:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestSnippetView</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Create a new instance of our application struct which uses the mocked
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// dependencies.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>app</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newTestApplication</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Establish a new test server for running end-to-end tests.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>ts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newTestServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>routes</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8f5902;font-style:italic>// Set up some table-driven tests to check the responses sent by our
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#8f5902;font-style:italic>// application for different URLs.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>	<span style=color:#000>tests</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>name</span>     <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span>		<span style=color:#000>urlPath</span>  <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span>		<span style=color:#000>wantCode</span> <span style=color:#204a87;font-weight:700>int</span>
</span></span><span style=display:flex><span>		<span style=color:#000>wantBody</span> <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}{</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#4e9a06>&#34;Valid ID&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#4e9a06>&#34;/snippet/view/1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantBody</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;An old silent pond...&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#4e9a06>&#34;Non-existent ID&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#4e9a06>&#34;/snippet/view/2&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusNotFound</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#4e9a06>&#34;Negative ID&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#4e9a06>&#34;/snippet/view/-1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusNotFound</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#4e9a06>&#34;Decimal ID&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#4e9a06>&#34;/snippet/view/1.23&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusNotFound</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#4e9a06>&#34;String ID&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#4e9a06>&#34;/snippet/view/foo&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusNotFound</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>name</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#4e9a06>&#34;Empty ID&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#4e9a06>&#34;/snippet/view/&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>			<span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusNotFound</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>range</span> <span style=color:#000>tests</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>			<span style=color:#000>code</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>body</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>code</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wantCode</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wantBody</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#4e9a06>&#34;&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>				<span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StringContains</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>body</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wantBody</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>			<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=testing-utilities>Testing utilities</h3><p>E2E tests require lots of boilerplate code&ndash;spinning up test servers, making requests, etc. You can abstract much of that code away to a <code>testutils_test.go</code> file.</p><p>If you plan to use the test utilities across multiple packages, place them in the <code>/internal</code> directory. Otherwise, place them in the same directory as the code they help test.</p><p>In the previous section, we created the <code>TestPingE2E</code> function to test the <code>ping</code> handler from end to end. We can create a new <code>testutils_test.go</code> file that creates the following test components:</p><ul><li>Application</li><li>Server</li><li>Client request</li></ul><p>For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Create a newTestApplication helper which returns an instance of our
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// application struct containing mocked dependencies.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>newTestApplication</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>application</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>application</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>errorLog</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Discard</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>		<span style=color:#000>infoLog</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Discard</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Define a custom testServer type which embeds a httptest.Server instance.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>testServer</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>httptest</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Server</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Create a newTestServer helper which initalizes and returns a new instance
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// of our custom testServer type.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>newTestServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>h</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Handler</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testServer</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Initialize the test server as normal.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>ts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>httptest</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewTLSServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>h</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Initialize a new cookie jar.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>jar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cookiejar</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Add the cookie jar to the test server client. Any response cookies will
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// now be stored and sent with subsequent requests when using this client.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Jar</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>jar</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Disable redirect-following for the test server client by setting a custom
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// CheckRedirect function. This function will be called whenever a 3xx
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// response is received by the client, and by always returning a
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// http.ErrUseLastResponse error it forces the client to immediately return
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// the received response.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>CheckRedirect</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>via</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ErrUseLastResponse</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>testServer</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>ts</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Implement a get() method on our custom testServer type. This makes a GET
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// request to a given url path using the test server client, and returns the
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// response status code, headers and body.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>ts</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testServer</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>urlPath</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#000>rs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>Get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>URL</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>urlPath</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>	<span style=color:#000>body</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>io</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadAll</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>		<span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Fatal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>	<span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TrimSpace</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusCode</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><blockquote><p>Note how the <code>newTestServer</code> function handles cookies. Cookies are stored for each HTTP response and sent back to the test server for any responses. Additionally, the client never follows redirects so that hit always returns the first HTTP response sent by our server for the request.</p></blockquote><p>Now, you can simplify the <code>TestPingE2E</code> function considerably:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>TestPingE2E</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>testing</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>T</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>app</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newTestApplication</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>ts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>newTestServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>app</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>routes</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>defer</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>code</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>_</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>body</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>ts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;/ping&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>code</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>StatusOK</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>t</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>body</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;OK&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=testing-html>Testing HTML</h2><p>None of this worked. Try it later as you write the code, instead of at the very end.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=/js/main.min.be25a680a0d95dc8b5d6664622e2134aa894220e2f224ef609e00f633a3a1b32.js integrity="sha256-viWmgKDZXci11mZGIuITSqiUIg4vIk72CeAPYzo6GzI=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>